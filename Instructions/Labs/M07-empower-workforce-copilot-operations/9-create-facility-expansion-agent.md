# 演習 2、タスク 2: Copilot Studio を使用して施設拡張 FAQ エージェントを構築する
---
Contoso はファーゴ物流センターの拡張工事に着工しました。 この会社は、Loop でプロジェクトのマイルストーンを追跡しています (タスク 1)。 オペレーション リーダーであるあなたは、建設スケジュール、一時的なアクセス変更、安全要件、在庫移動期間などに関する繰り返し発生する質問について、メールやチャットでの細かな問い合わせがオペレーション部門に殺到しないように、信頼性の高いワンストップの回答を必要としているというフィードバックをリーダーシップ チームと現場チームから受け取りました。

組織全体から次のような質問が寄せられています。

- 日々のガイダンスを求める現場スタッフ (ウェアハウス/フロア チーム)。
- すぐに参照する必要があるスーパーバイザーとコーディネーター (安全、ロジスティクス)。
- 状態や影響に関する質問に対し、信頼できる回答を求めるリーダーシップとプロジェクト プログラム マネージャー。

オペレーション スタッフが日常的に確認する質問の多くは似たようなものです。 次に例を示します。

- 「ドック 3 はまだ開いていますか。」
- 「パッキング部門に適用される一時避難ルートはどれですか。」
- 「CHAI‑12 と COFF‑08 はいつ移動しますか。」
- 「新しい棟ではどのような PPE が必要ですか。」

質問の範囲が広がり、オペレーション チームでは対応しきれなくなり始めています。特に、回答は一貫性があり、引用に基づき、365 日 24 時間いつでも提供できる必要があるためです。 この問題を解決するために、Microsoft 365 Copilot の AI アシスタント機能を利用し、次の機能を備えた Q&A エージェントを作成することにしました。

- 関連する承認済みのドキュメントを使用して、拡張に関する自然言語の質問に回答します。

- ユーザーが詳細を信頼して確認できるように、引用またはリンクを表示します。

- ガードレールを使用します (情報源がある情報のみを回答する、推測しない、情報がない場合は Operations Intake に誘導する、範囲外の質問には丁寧に断る)。

- 簡潔なフォールバックを提供します。

> [!NOTE]
> この演習では、Copilot Studio Lite エクスペリエンスを使用して、Facility Expansion FAQ Assistant エージェントを作成します。 このシンプル エクスペリエンスは、日常業務を行うビジネス ユーザー向けに設計されており、プログラミング スキルは必要ありません。 一方、より複雑で高度なエージェントを構築するソフトウェア開発者は、通常、Copilot Studio のフル エクスペリエンスを使用します。

このタスクを完了するには、以下の手順を実行します。

1.  次の各リンクを選択して、それぞれのファイルをダウンロードし、OneDrive アカウントに保存します。

    - [**Contoso_Expansion_Project_Overview.docx**](https://go.microsoft.com/fwlink/?linkid=2347809)

    - [**Contoso_Expansion_FAQ_Reference.docx**](https://go.microsoft.com/fwlink/?linkid=2347517)

    - [**Contoso_Expansion_Knowledge_Pack.docx**](https://go.microsoft.com/fwlink/?linkid=2347808)

    - [**Contoso_Inventory_Move_Schedule.xlsx**](https://go.microsoft.com/fwlink/?linkid=2347519)

    - [**Contoso_Safety_Protocol_Updates.docx**](https://go.microsoft.com/fwlink/?linkid=2347520)

    - [**Contoso_Temporary_Evacuation_Routes.docx**](https://go.microsoft.com/fwlink/?linkid=2347611)

    - [**Contoso_Vendor_Access_and_Hours.docx**](https://go.microsoft.com/fwlink/?linkid=2347521)

2.  Microsoft Edge ブラウザーで新しいタブを開き、Microsoft 365 を開きます。

3.  Microsoft 365 のナビゲーション ウィンドウで **[新しいエージェント]** を選択します。 これにより、Copilot Studio の**エージェント ビルダー**が開き、**[新しいエージェント]** ページが表示されます。

4.  **[新しいエージェント]** ページでエージェントを作成するよう Copilot に依頼します。 プロンプトには、エージェントの名前と、エージェントの概要、対象ユーザー、想定する動作などの一般的な説明を入力する必要があります。  
    <br/>このエージェントの場合、次のプロンプトを入力し、進む矢印 (送信) アイコンを選択してプロンプトを送信します。  
    <br/>**"施設拡張 FAQ アシスタント" というタイトルのエージェントを作成してください。このエージェントの目的は、Contoso のファーゴ物流センター拡張に関する従業員からの質問に回答することです。たとえば、建設スケジュール、安全プロトコル、一時避難ルート、在庫移動ウェーブ、ベンダーのアクセス要件、業務上の影響などです。このエージェントにナレッジ ソースとして割り当てられた承認済みドキュメントのみを使用してください。**

5.  進む矢印を選択すると、新しいエージェントの**エージェント ビルダー** フォームが表示されます。 フォームの上部には、**[説明]** タブと **[構成]** タブがあります。

    - **[説明]** タブを使用して、Copilot と会話を続けることができます。 このタブは既定で表示されます。

    - **[構成]** タブでは、エージェントを動作させる詳細設定を定義できます。

    Copilot によってエージェントが作成されるまで 1 から 2 分待つと、**[エージェント プレビュー]** ペインにエージェントの名前と説明が表示されます。

6.  フォームの上部にある **[構成]** タブを選択します。 入力したプロンプトに基づいて Copilot が実行した内容を確認しましょう。

7.  **[構成]** タブの **[名前]** フィールドと **[説明]** フィールドは、入力したプロンプトに基づいて設定されているはずです。 **[指示]** フィールドまで下スクロールします。 最初のプロンプトで指定した説明に基づいて、Copilot によってこれらの指示が生成されました。 Copilot によって生成された指示の詳細レベルを確認します。

   > [!IMPORTANT]
   > エージェント ビルダー プロセスの優れた点は、基本的な自然言語による説明が、Copilot によって複雑な一連の指示に自動的に変換されることです。 このプロセスにより、詳細な指示セットを自分で作成する必要がなくなります。

8.  指示を変更する場合は、**[指示]** フィールドで直接手動で編集するか、指示の更新を Copilot に依頼することができます。  
    <br/>あなたは **[指示]** を確認した後、指示セットに他の項目をいくつか追加するよう Copilot に依頼することにしました。 これを行うには、**[説明]** タブを選択し、次のプロンプトを入力します。

    **次の項目を含めるよう指示を更新してください:**

    - **推測は避けてください。情報が不足している場合やあいまいな場合は、その点を示し、丁寧なフォールバック応答を提供してください。たとえば、「その件については、確認済みの回答がまだありません。「拡張の概要」をご確認いただくか、Operations Intake までお問い合わせください。」などです。**

    - **機密性の高いトピック (たとえば、予算の内訳や契約内容) については、「その情報をお伝えすることはできません。プロジェクト コントローラーにお問い合わせください。」のように丁寧に断ってください。**

    - **回答は、ファーゴの拡張と現在の 24 週間のタイムラインに固有のものに限定してください。**

    - **応答ではリンクや引用を示し、重要な日付やゾーンは強調表示してください。**

9.  指示を更新した後、Copilot の応答を確認します。 Copilot によって加えられた変更を確認するには、**[構成]** タブを選択し、**[指示]** フィールドまで下にスクロールします。 依頼した新しい指示が Copilot によって追加されたことを確認します。

10.  現在の指示は良さそうですが、改善の余地もありそうです。 どのように改善すればよいかわからないので、Copilot に意見を聞くことにしました。  
    <br/>そのためには、**[説明]** タブを選択します。今回は、このエージェントを改善するために推奨される他の指示を Copilot に尋ねるプロンプトを入力します。

11.  Copilot の推奨事項を確認します。 提案に満足したので、それらをすべてエージェントの指示に追加するよう Copilot に依頼します。

12.  指示を更新したという応答が Copilot からあったら、**[構成]** タブを選択し、**[指示]** をスクロールします。 Copilot によって追加された新しい項目に注目してください。

13.  指示に満足したら、エージェントのナレッジ ソースとスターター プロンプトを構成する準備は完了です。  
    <br/>**[構成]** タブで、**[ナレッジ]** セクションまで下にスクロールし、**[すべての Web サイトを検索する]** トグル スイッチが無効になっていることを確認します。 元のプロンプトで指定した説明に基づいてエージェントを作成する際には、提供したファイルのみを使用するように指示したため、Copilot により、このトグル スイッチは無効にされているはずです。 トグル スイッチが有効になっている場合は、ここで無効にします。

14.  **[ナレッジ]** セクションの **[URL または名前を入力するか、ここにファイルをドロップしてください]** フィールドの横に表示される **[デバイスからアップロード]** アイコンを選択します。 表示される**エクスプローラー** ウィンドウで **OneDrive** フォルダーに移動し、ステップ 1 でダウンロードして OneDrive に保存した 7 つのファイルを選択します。

15.  **[推奨プロンプト]** では、Copilot にプロンプトを生成してもらうか、手動で独自のプロンプトを作成することができます。 両方の方法を試してみましょう。  
    <br/>プロンプト候補を Copilot に生成してもらうには、**[説明]** タブを選択し、エージェントに対して 3 つのプロンプト候補を生成するよう Copilot に依頼します。 各プロンプトにタイトルとメッセージがある点に注目してください。

16.  次に、独自のプロンプトをいくつか入力します。 **[構成]** タブを選択し、**[推奨プロンプト]** セクションまで下にスクロールします。 Copilot によってエージェントに追加された 3 つのプロンプトが表示されます。  
    <br/>手動で追加するプロンプトごとに、プロンプトの下に表示される **[推奨プロンプトを 1 つ追加する]** オプションを選択します。  
    <br/>一般的な施設拡張トピックに関連する 6 つのプロンプト候補が下に表示されます。 これらのプロンプトを確認し、気に入ったものを 2 つか 3 つ選択して、エージェントに追加します。

        - **タイトル:** 建設タイムライン チェック
            - **メッセージ:** ファーゴ物流センターの拡張工事は現在どのフェーズにありますか。また、今週は建物のどの領域が影響を受けますか。  
                
        - **タイトル:** PPE と安全要件
            - **メッセージ:** 建設隣接区域ではどのような PPE が必要ですか。また、これらの要件は 24 週間の拡張期間中に変更されますか。  
                
        - **タイトル:** 一時避難ルート案内
            - **メッセージ:** 拡張工事中のパッキング部門領域の一時避難ルートと、最寄りの集合場所はどこですか。  
                
        - **タイトル:** 在庫移動ウェーブの詳細
            - **メッセージ:** 次の在庫移動ウェーブに含まれる SKU と、そのウェーブの開始日と終了日はいつですか。  
                
        - **タイトル:** ベンダー アクセスと駐車場の指示
            - **メッセージ:** 拡張工事中、ベンダーはどこに駐車すればよいですか。また、一時的なアクセス時間とチェックインについてどのような規則がありますか。  
                
        - **タイトル:** 運用上の影響の要約
            - **メッセージ:** 進行中の建設工事とドックのアップグレードにより、今後数週間でスタッフはどのような業務上の影響を予想すべきですか。  
                
17.  プロンプト候補をいくつかテストします。 エージェントがデータをナレッジ ソースのドキュメントから正しく引き出していることを確認します。 次のタスクではカスタム プロンプトを送信します。

18. プロンプト候補の結果に満足したら、**[作成]** ボタンを選択してエージェントを作成します。

19. エージェントが作成されると、エージェントが正常に作成されたことを示すダイアログ ボックスが表示されます。 このダイアログ ボックスから、そのエージェントに移動することも、共有することもできます。 **[エージェントに移動する]** オプションを選択します。

> [!NOTE]
> この段階では、エージェントは非公開であり、アクセスできるのはあなただけです。 実務のシナリオで、エージェントを複数のチーム メンバーが使用する必要がある場合は、その人々と共有することになります。 このトレーニング演習では、あなた専用のテナント内で作業しているため、共有は必要ありません。



